/*!
 * froala_editor v4.2.0 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2024 Froala Labs
 */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],i):i(e.FroalaEditor)}(this,function(k){"use strict";function r(e,i){(null==i||i>e.length)&&(i=e.length);for(var t=0,n=new Array(i);t<i;t++)n[t]=e[t];return n}function m(e,i){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function c(e,i){if(e){if("string"==typeof e)return r(e,i);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,i):void 0}}(e))||i&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){l=!0,s=e},f:function(){try{a||null==t["return"]||t["return"]()}finally{if(l)throw s}}}}function g(e,i){i?alert(k.FILESTACK_ERRORS[e]+"\nResponse: "+JSON.stringify(i)):alert(k.FILESTACK_ERRORS[e])}var O,P;(k=k&&k.hasOwnProperty("default")?k["default"]:k).FILESTACK_ERRORS={MISSING_API_KEY:"Filestack api is missing",MISSING_FILESTACK_OPTIONS:'The Filestack options are missing. Please check "filestackOptions"',MISSING_FILESTACK_PICKER_OPTIONS:'The Filestack picker is missing. Please check "filestackOption"',MEDIA_TYPES_NOT_SUPPORTED:"The selected media types are not supported",SOURCE_TYPES_NOT_SUPPORTED:"The selected source types are not supported by Filestack",INVALID_PICKER_PARAMS:"Error opening Filestack picker due to invalid picker parameters",IMAGE_UPLOAD_FAILED:"Image upload to filestack failed while processing the request",BROWSER_NOT_SUPPORTED:"Filestack plugin is currently not supported on this browser",FILESTACK_CLIENT_NOT_CREATED:"The Filestack client is not created yet",UNSUPPORTED_IMAGE_TYPE:"This image is not supported for image transformation"},k.FILESTACK_PICKER_OPTIONS_MEDIA_MAX_SUPPORTED=[".pdf","image/jpeg","image/png","image/jpg","image/gif","image/webp","video/*","audio/*"],k.FILESTACK_PICKER_OPTIONS_IMAGE_ONLY_SUPPORTED=["image/jpeg","image/png","image/jpg","image/gif","image/webp"],k.FILESTACK_PICKER_OPTIONS_VIDEO_ONLY_SUPPORTED=["video/*"],k.FILESTACK_PICKER_OPTIONS_FROMSOURCES_MAX_SUPPORTED=["local_file_system","url","imagesearch","facebook","instagram","googledrive","dropbox"],k.FILESTACK_PICKER_DEFAULT_OPTIONS={displayMode:"overlay",uploadInBackground:!1,stage:{cname:"stage.filestackapi.com"}},Object.assign(k.DEFAULTS,{filestackOptions:{}}),k.PLUGINS.filestack=function(r){if(!r.opts.pluginsEnabled.includes("filestack")&&0===Object.keys(r.opts.filestackOptions).length)return{_init:s,showFilestackPopup:e,eligibleMediaTypes:p,eligiblefromSourceTypes:o,imageTransFormations:a};var c;function p(i,e){if(!e||0===e.length)return i;var t=[];return e.forEach(function(e){-1<i.indexOf(e)&&t.push(e)}),0===t.length&&g("MEDIA_TYPES_NOT_SUPPORTED"),t}var f=r.opts.filestackOptions.filestackAPI;if(f)try{c=r.opts.filestackOptions.staging?filestack.init(f,k.FILESTACK_PICKER_DEFAULT_OPTIONS.stage):filestack.init(f,k.FILESTACK_PICKER_DEFAULT_OPTIONS)}catch(d){0===!Object.keys(r.opts.filestackOptions).length&&g("FILESTACK_CLIENT_NOT_CREATED")}else g("MISSING_API_KEY");function e(e,i,t){var n;if(i&&(O=i),t&&(P=t),"openFilePicker"===e?n=k.FILESTACK_PICKER_OPTIONS_MEDIA_MAX_SUPPORTED:"openFilePickerImageOnly"===e||"openFilePickerReplaceImageOnly"===e||"openFilePickerImage"===e?n=k.FILESTACK_PICKER_OPTIONS_IMAGE_ONLY_SUPPORTED:"openFilePickerVideoOnly"!==e&&"openFilePickerReplaceVideoOnly"!==e&&"openFilePickerVideo"!==e||(n=k.FILESTACK_PICKER_OPTIONS_VIDEO_ONLY_SUPPORTED),!f)return g("MISSING_API_KEY"),!1;if(!function l(){var e=navigator.userAgent,i=r||"",t=i.helpers,n=i.browser,o=-1!=e.indexOf("Windows NT 10.")||-1!=e.indexOf("Windows NT 7."),s=e.match(/(chrome|safari|trident(?=\/))\/?\s*(\d+)/i)[2]||[],a=null;return 0<=e.indexOf("Android")&&(a=parseFloat(e.slice(e.indexOf("Android")+8))),!!((t.isMac()||t.isIOS())&&12<t.getSafariVersion())||!!(o&&n.chrome&&70<s||-1!=e.indexOf("Edg")&&40<s)||!!(t.isAndroid()&&6<a&&n.chrome&&70<s)}())return g("BROWSER_NOT_SUPPORTED"),!1;if(!c&&0===!Object.keys(r.opts.filestackOptions).length)return g("FILESTACK_CLIENT_NOT_CREATED"),!1;var o=r.opts.filestackOptions.pickerOptions?Object.assign({},r.opts.filestackOptions.pickerOptions,{accept:r.opts.filestackOptions.pickerOptions.accept?r.opts.filestackOptions.pickerOptions.accept:[],fromSources:r.opts.filestackOptions.pickerOptions.fromSources?r.opts.filestackOptions.pickerOptions.fromSources:[]}):{accept:[],fromSources:[]},s=p(n,o.accept),a=Object.assign({},o,{accept:s});try{c.picker(a).open()}catch(d){0===Object.keys(r.opts.filestackOptions).length&&g("INVALID_PICKER_PARAMS")}r.popups.hideAll(),r.selection.save()}function u(e){return!1===r.events.trigger("image.uploadedToFilestack",[e],!0)?(r.edit.on(),!1):e}function i(e){var i=r.button.getButtons("#openFilePicker-1"),t=r.button.getButtons("#openFilePickerImageOnly-1"),n=r.button.getButtons("#openFilePickerVideoOnly-1");i.removeClass("fr-filestack-active"),t.removeClass("fr-filestack-active"),n.removeClass("fr-filestack-active"),!1===r.events.trigger("image.filestackPickerClosed",[e],!0)&&r.edit.on()}function t(){P=O=null,r.selection.restore()}function n(e){g("IMAGE_UPLOAD_FAILED",e),!1===r.events.trigger("image.uploadFailedToFilestack",[response],!0)&&r.edit.on()}function o(i,e){if(!e||0===e.length)return i;var t=[];return e.forEach(function(e){-1<i.indexOf(e)&&t.push(e)}),0===t.length&&g("SOURCE_TYPES_NOT_SUPPORTED"),t}function s(){if(!c&&0===!Object.keys(r.opts.filestackOptions).length)return g("FILESTACK_CLIENT_NOT_CREATED"),!1;var e=r.opts.filestackOptions.pickerOptions?Object.assign({},r.opts.filestackOptions.pickerOptions,{accept:r.opts.filestackOptions.pickerOptions.accept?r.opts.filestackOptions.pickerOptions.accept:[],fromSources:r.opts.filestackOptions.pickerOptions.fromSources?r.opts.filestackOptions.pickerOptions.fromSources:[]}):{accept:[],fromSources:[]};(e.fromSources=o(k.FILESTACK_PICKER_OPTIONS_FROMSOURCES_MAX_SUPPORTED,e.fromSources),e.onOpen=function(e){!1===r.events.trigger("image.filestackPickerOpened",[e],!0)&&r.edit.on();var i=r.selection.get();i&&(i.anchorNode,i.anchorOffset)},e.onUploadDone=function(e){return function c(e,i,t){if("undefined"!=typeof e.filesUploaded){var n,o=m(e.filesUploaded);try{var s,a=function a(){var i=n.value;if(i.mimetype.includes("pdf")||i.mimetype.includes("image/jpeg")||i.mimetype.includes("image/png")||i.mimetype.includes("image/")||i.mimetype.includes("video/")){var t=function t(e){i.mimetype.includes("image")?e.next().is("br")&&e.next().remove():(e.next()&&e.next().is("br")&&e.next().remove(),e.prev()&&e.prev().is("br")&&e.prev().remove()),r.selection.setAfter(e[0])};if(i.mimetype.includes("image")&&!O?u(e)&&r.image.insert(i.url,!1,null,null,null,t):i.mimetype.includes("video")&&!P?r.video.insertHtmlVideo(i.url,null,null,null,null,t):i.mimetype.includes("pdf")&&r.file.insert(i.url,i.filename,null),O)return r.image.insert(i.url,!1,null,O),O=null,{v:void 0};if(P)return r.video.insertHtmlVideo(i.url,!1,null,P),P=null,{v:void 0}}};for(o.s();!(n=o.n()).done;)if(s=a())return s.v}catch(l){o.e(l)}finally{o.f()}}r.browser.safari&&r.selection.setAfter()}(e)},e.onFileUploadFailed=n,e.onClose=i,e.onCancel=t,r.opts.filestackOptions.pickerOptions=e,r.opts.filestackOptions.uploadToFilestackOnly)&&filestackDnD.init(c,r.el).on("uploadFileFinish",function(e){(e.files[0].mimetype.includes("pdf")||e.files[0].mimetype.includes("image/jpeg")||e.files[0].mimetype.includes("image/png")||e.files[0].mimetype.includes("image/")||e.files[0].mimetype.includes("video/"))&&(e.files[0].mimetype.includes("image")?u(e)&&r.image.insert(e.data.url,!1):e.files[0].mimetype.includes("video")?r.video.insertHtmlVideo(e.data.url):e.files[0].mimetype.includes("pdf")&&r.file.insert(e.data.url,e.data._file.name,null))})}function a(e){O=e;var t=r.image.get()[0].currentSrc||"",i=r.opts.filestackOptions.transformationOptions,n=filestack.init(f),o=new FilestackTransform(n,i);o.setConfigKey("output.blob",!0),o.open(t).then(function(e){n.upload(e).then(function(e){var i=r.selection.save();void 0!==t&&(r.image.insert(e.url,!1,null,O),O=null,r.selection.restore(i))}),n.on("upload.error",function(e){})});var s=r.button.getButtons("#filestackIcon-1");o.on("canvas:save",function(){s.removeClass("fr-filestack-active"),r.image.showProgressBar("_",O)}),o.on("canvas:cancel",function(){s.removeClass("fr-filestack-active")})}return{_init:s,showFilestackPopup:e,eligibleMediaTypes:p,eligiblefromSourceTypes:o,imageTransFormations:a}},k.DefineIcon("filestackIcon",{ALT:"Open Filestack file picker",NAME:"filestack",SVG_KEY:"filestackIcon"}),k.DefineIcon("filestackIconAdd",{ALT:"Open Filestack file picker",NAME:"filestackAdd",SVG_KEY:"filestackIconAdd"}),k.DefineIcon("imageTransformations",{ALT:"Open Filestack image transformations",NAME:"imageTransformations",SVG_KEY:"imageTransformations"}),k.DefineIcon("imageFilestackOnly",{template:"svgMultiplePath",PATHS:'<path d="M11.1 15.8h7.7V5.7H5.1v4.2H3.4V5.7c0-.9.8-1.7 1.7-1.7h13.7c.9 0 1.7.8 1.7 1.7v10.1c0 .9-.8 1.7-1.7 1.7h-7.7v-1.7Zm0-2.5 2.6-3.4h.2l3.3 4.2h-6.1v-.8ZM8.9 6.9c.7 0 1.3.6 1.3 1.3s-.6 1.3-1.3 1.3-1.3-.6-1.3-1.3.6-1.3 1.3-1.3Z"/><path d="M11.1 17.5 8.7 20v-2.5h2.4Zm-4.9-1.6v.9h-.9v-.9h.9Zm4.9.9h-.9v-6H3.5V19h4.6v.9H2.5V9.8h8.6v7Zm-3.4-1.6H5.3v-.9h2.4v.9Zm.6-2.5v.9h-3v-.9h3Z"/>'}),k.DefineIcon("videoFilestackOnly",{template:"svgMultiplePath",PATHS:'<path d="m11 11.3 1 2.6h3.6V6.8h-9v3.6H4.8V6c0-.2.1-.5.3-.6s.4-.3.6-.3h10.8c.2 0 .5.1.6.3s.3.4.3.6v3.1l2.1-2c.3-.3.6-.3 1-.2.3 0 .6.5.6.8v5.5c0 .4-.2.7-.6.8-.3.1-.7 0-1-.2l-2.1-2v3.1c0 .2 0 .5-.3.6-.2.2-.4.3-.6.3H12V14l-1-2.7Z" /><path d="M11.1 17.5 8.7 20v-2.5h2.4Zm-4.9-1.6v.9h-.9v-.9h.9Zm4.9.9h-.9v-6H3.5V19h4.6v.9H2.5V9.8h8.6v7Zm-3.4-1.6H5.3v-.9h2.4v.9Zm.6-2.5v.9h-3v-.9h3Z"/>'}),k.RegisterCommand("openFilePicker",{type:"button",icon:"filestackIcon",title:"Open Filestack File Picker",callback:function(){this.button.getButtons("#openFilePicker-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePicker")},plugin:"filestack"}),k.RegisterCommand("openFilePickerImageOnly",{type:"button",icon:"imageFilestackOnly",title:"Open Filestack Image Picker",callback:function(){this.button.getButtons("#openFilePickerImageOnly-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePickerImageOnly",this.image.get())},plugin:"filestack"}),k.RegisterCommand("openFilePickerImage",{type:"button",icon:"filestackIcon",title:"Open Filestack Image Picker",callback:function(){this.button.getButtons("#openFilePickerImage-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePickerImage",this.image.get())},plugin:"filestack"}),k.RegisterCommand("openFilePickerReplaceImageOnly",{type:"button",icon:"filestackIconAdd",title:"Open Filestack File Picker",callback:function(){this.button.getButtons("#openFilePickerReplaceImageOnly-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePickerReplaceImageOnly",this.image.get())},plugin:"filestack"}),k.RegisterCommand("openFilePickerVideoOnly",{type:"button",icon:"videoFilestackOnly",title:"Open Filestack Video Picker",callback:function(){this.button.getButtons("#openFilePickerVideoOnly-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePickerVideoOnly",null,this.video.get())},plugin:"filestack"}),k.RegisterCommand("openFilePickerVideo",{type:"button",icon:"filestackIcon",title:"Open Filestack Video Picker",callback:function(){this.button.getButtons("#openFilePickerVideo-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePickerVideo",this.image.get())},plugin:"filestack"}),k.RegisterCommand("openFilePickerReplaceVideoOnly",{type:"button",icon:"filestackIconAdd",title:"Open Filestack File Picker",callback:function(){this.button.getButtons("#openFilePickerReplaceVideoOnly-1").addClass("fr-filestack-active"),this.filestack.showFilestackPopup("openFilePickerReplaceVideoOnly",null,this.video.get())},plugin:"filestack"}),k.RegisterCommand("filestackIcon",{type:"button",icon:"imageTransformations",title:"Image Transformations",plugin:"filestack",callback:function(e){var i;(null===(i=this.image.get(0)[0])||void 0===i||null===(i=i.currentSrc)||void 0===i?void 0:i.includes("filestackcontent"))?(this.button.getButtons("#filestackIcon-1").addClass("fr-filestack-active"),this.filestack.imageTransFormations(this.image.get())):g("UNSUPPORTED_IMAGE_TYPE")}})});